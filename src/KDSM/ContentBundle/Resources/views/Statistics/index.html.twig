{% extends 'KDSMContentBundle::main.base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {#<script src="//cdnjs.cloudflare.com/ajax/libs/highcharts/4.1.5/highcharts.js"></script>#}
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>

    <script type="text/javascript">
        function replaceAll(find, replace, str) { // Bugfix for &quot; values in json
            return str.replace(new RegExp(find, 'g'), replace);
        }

        var data = '{{ stats }}';
        var stats = JSON.parse(replaceAll('&quot;', '"', data));
        console.log(stats);

        $(function () {
            $('#container1').highcharts({
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Goals scored based on team side'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            style: {
                                color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                            }
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Goals scored',
                    data: stats[0]
                }]
            });
        });


    </script>

{% endblock %}

{% block content %}

    <div id="container1" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>

{% endblock %}